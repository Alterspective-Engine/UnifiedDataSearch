{
    "comment": "FormIO component configuration for UnifiedOdsEntityPicker (Clean Architecture)",
    "type": "htmlelement",
    "label": "Client Selection",
    "key": "clientSelection",
    "content": "<div data-bind='component: { name: \"Alt.UnifiedDataSearch.Widgets.UnifiedOdsEntityPicker\", params: $data.componentConfig }'></div>",
    "refreshOnChange": false,
    "customClass": "unified-entity-picker-formio",
    "properties": {
        "componentConfig": {
            "label": "Select Client",
            "placeholder": "Search ShareDo ODS for client...",
            "required": true,
            "allowMultiple": false,
            "allowInlineSearch": true,
            "mode": "select",
            "fieldName": "selectedClientId",
            "returnField": "odsId",
            "entityTypes": ["person", "organisation"],
            "searchMode": "odsOnly",
            "maxQuickResults": 5,
            "displayFields": ["email"],
            "showIcon": true,
            "showEmail": true,
            "showPhone": false,
            "showSourceBadge": false
        }
    },
    "validate": {
        "required": true,
        "custom": "valid = instance.validationErrorCount && instance.validationErrorCount() === 0;"
    },
    "logic": [
        {
            "name": "Store Selected Value",
            "trigger": {
                "type": "event",
                "event": "change"
            },
            "actions": [
                {
                    "name": "Store ODS ID",
                    "type": "value",
                    "value": "value = instance.selectedEntity() ? instance.selectedEntity().odsId : null;"
                }
            ]
        }
    ]
}