<div class="Alt-UnifiedDataSearch-Widgets-UnifiedOdsEntityPicker ods-entity-picker-widget">
    
    <!-- Empty State - No Entity Selected -->
    <!-- ko if: !hasValue() -->
    <div class="card entity-card">
        <div class="status-section">
            <span class="fa fa-2x fa-male"></span>
        </div>
        <div class="content-section card-message">
            <span class="card-message-text" data-bind="text: options.label || 'Primary Owner'"></span>
            <div class="search-prompt" data-bind="click: openSearchBlade">
                <i class="fa fa-search"></i>
                <span>Click to search</span>
            </div>
        </div>
        <div class="menu-section" data-bind="visible: options.enabled !== false">
            <a href="#" data-bind="click: openSearchBlade" class="fa fa-chevron-right text-primary"></a>
        </div>
    </div>
    <!-- /ko -->
    
    <!-- Single Entity Selected -->
    <!-- ko if: !options.allowMultiple && hasValue() -->
    <div class="card entity-card with-content">
        <div class="status-section">
            <!-- ko if: selectedEntity().isUser && selectedEntity().profileImageUrl -->
            <img class="user-profile-image" 
                 data-bind="attr: { src: selectedEntity().profileImageUrl }" />
            <!-- /ko -->
            <!-- ko if: !selectedEntity().isUser || !selectedEntity().profileImageUrl -->
            <span class="fa fa-2x" data-bind="css: getEntityIcon(selectedEntity())"></span>
            <!-- /ko -->
        </div>
        <div class="content-section">
            <div class="entity-header">
                <span class="entity-header__title" data-bind="text: getEntityDisplayName(selectedEntity())"></span>
                <!-- ko if: selectedEntity().roleLabel -->
                <div class="entity-header__tags">
                    <span class="entity-header__tags-item label label-primary" data-bind="text: selectedEntity().roleLabel"></span>
                </div>
                <!-- /ko -->
            </div>
            <div class="entity-content">
                <div class="row">
                    <!-- ko if: selectedEntity().email || selectedEntity().phone -->
                    <div class="entity-content-block col-lg-12">
                        <!-- ko if: selectedEntity().email -->
                        <span class="entity-content-block__title">Email</span>
                        <p class="entity-content-block__content" data-bind="text: selectedEntity().email"></p>
                        <!-- /ko -->
                        <!-- ko if: selectedEntity().phone -->
                        <span class="entity-content-block__title">Phone</span>
                        <p class="entity-content-block__content" data-bind="text: selectedEntity().phone"></p>
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->
                </div>
            </div>
        </div>
        <div class="menu-section" data-bind="visible: options.enabled !== false">
            <!-- ko if: options.allowEdit -->
            <a href="#" data-bind="click: editEntity" class="fa fa-pencil text-primary"></a>
            <!-- /ko -->
            <!-- ko if: options.allowClear && !options.required -->
            <a href="#" data-bind="click: clearSelection" class="fa fa-unlink text-primary"></a>
            <!-- /ko -->
        </div>
    </div>
    <!-- /ko -->
    
    <!-- Multiple Entities Selected -->
    <!-- ko if: options.allowMultiple && hasValue() -->
    <div class="card entity-card multiple">
        <div style="width: 100%" data-bind="foreach: selectedEntities">
            <div class="card entity-card with-content" style="margin-bottom: 10px;">
                <div class="status-section">
                    <span class="fa" data-bind="css: $parent.getEntityIcon($data)"></span>
                </div>
                <div class="content-section">
                    <div class="entity-header">
                        <span class="entity-header__title" data-bind="text: $parent.getEntityDisplayName($data)"></span>
                        <!-- ko if: $data.roleLabel -->
                        <div class="entity-header__tags">
                            <span class="entity-header__tags-item label label-primary" data-bind="text: $data.roleLabel"></span>
                        </div>
                        <!-- /ko -->
                    </div>
                </div>
                <div class="menu-section">
                    <a href="#" data-bind="click: function() { $parent.removeEntity($data); }" class="fa fa-unlink text-primary"></a>
                </div>
            </div>
        </div>
        <div class="column-auto menu-section multi-select-menu-section" data-bind="visible: options.enabled !== false">
            <a href="#" data-bind="click: openSearchBlade" class="fa fa-chevron-right text-primary"></a>
        </div>
    </div>
    <!-- /ko -->
    
    <!-- Loading State -->
    <!-- ko if: isSearching() -->
    <div class="card entity-card">
        <div class="status-section">
            <span class="fa fa-2x fa-spinner fa-spin"></span>
        </div>
        <div class="content-section card-message">
            <span class="card-message-text">Loading...</span>
        </div>
    </div>
    <!-- /ko -->
    
</div>